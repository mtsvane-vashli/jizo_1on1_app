// frontend/src/views/LearningResources.js
import React, { useState } from 'react';
import layoutStyles from '../App.module.css';
import styles from './LearningResources.module.css';
// ★修正点: 'lucide-react' のインポートを削除

// ★修正点: SVGでChevronアイコンを直接定義
const ChevronIcon = ({ className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth="2"
    strokeLinecap="round"
    strokeLinejoin="round"
    className={className}
  >
    <path d="m6 9 6 6 6-6" />
  </svg>
);


// アコーディオンの各アイテムコンポーネント
const AccordionItem = ({ title, children, isOpen, onClick }) => {
  return (
    <div className={styles.accordionItem}>
      <button className={styles.accordionTitle} onClick={onClick}>
        <span>{title}</span>
        {/* ★修正点: インポートしたコンポーネントの代わりにSVGアイコンを使用 */}
        <ChevronIcon className={`${styles.accordionIcon} ${isOpen ? styles.open : ''}`} />
      </button>
      <div className={`${styles.accordionContent} ${isOpen ? styles.open : ''}`}>
        <div className={styles.accordionContentInner}>
          {children}
        </div>
      </div>
    </div>
  );
};

// 学習リソースページの本体
function LearningResources() {
  const [openIndex, setOpenIndex] = useState(null);

  const handleAccordionClick = (index) => {
    setOpenIndex(openIndex === index ? null : index);
  };

  return (
    <div className={layoutStyles.viewContainer}>
      <h2 className={layoutStyles.screenHeader}>学習リソース</h2>
      <p className={layoutStyles.screenDescription}>
        「地蔵型1on1」を成功させるための、上司（聞き手）と部下（話し手）それぞれのガイドです。
      </p>

      <div className={styles.accordion}>
        <AccordionItem
          title="地蔵型1on1 ガイド：上司（聞き手）向け"
          isOpen={openIndex === 0}
          onClick={() => handleAccordionClick(0)}
        >
          <h3>1. 「地蔵型1on1」の基本概念</h3>
          <p>「地蔵型1on1メソッド」は、部下の自律的な成長を促し、組織全体の活性化を図るための独自のアプローチです。その核心は、上司が「話す」のではなく「待つ・聴く」ことに徹する点にあります。</p>
          
          <h4>1.1. 基本思想</h4>
          <p>まるで地蔵のように、静かに部下を見守り、その言葉と感情を深く受け止める姿勢を基本とします。これにより、部下が安心して本音を語れる環境を創出し、自己の内省を促すことで、自ら考え、成長する力を引き出します。この対話は、部下だけでなく上司自身の心も満たす「幸福のバケツ」を満たすことを目指すものです。</p>

          <h4>1.2. 目的</h4>
          <ul>
            <li>部下の心理的安全性を確保し、本音を引き出します。</li>
            <li>内省を促し、自己解決能力（経験学習）を向上させます。</li>
            <li>上司と部下の間に揺るぎない信頼関係を構築します。</li>
            <li>部下の主体性とエンゲージメントを高めます。</li>
            <li>上司自身の傾聴力や質問力を向上させ、自己認識を深めます。</li>
            <li>対話を通じて、相互の「幸福のバケツ」を満たします。</li>
          </ul>

          <h4>1.3. 特徴</h4>
          <ul>
            <li><strong>シンプルさ:</strong> マインドセットを重視するため、シンプルで継続しやすいです。</li>
            <li><strong>非評価的な姿勢:</strong> 部下の発言を判断せず、ありのまま受け止めます。</li>
            <li><strong>沈黙の重視:</strong> 部下が思考を深める「脳に汗をかく時間」として沈黙を大切にします。</li>
            <li><strong>伴走型支援:</strong> 導入後のフォローアップやコミュニティ運営など、手厚いサポート体制があります。</li>
          </ul>

          <h3>2. 従来の1on1との比較</h3>
          <p>地蔵型1on1は、従来の手法とは目的とアプローチが根本的に異なります。</p>
          <table className={styles.table}>
            <thead>
              <tr>
                <th>観点</th>
                <th>従来の1on1</th>
                <th>地蔵型1on1</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>主導権</td>
                <td>上司が主導し、アドバイスや指導が中心です。</td>
                <td>部下が主役で、上司は「聴く」ことに徹します。</td>
              </tr>
              <tr>
                <td>主目的</td>
                <td>課題解決や行動計画の策定です。</td>
                <td>部下の内省と自己理解の深化です。</td>
              </tr>
              <tr>
                <td>重視点</td>
                <td>結論や次のアクションです。</td>
                <td>プロセスとしての対話の質です。</td>
              </tr>
              <tr>
                <td>沈黙</td>
                <td>「埋めるべき空白」と捉えられがちです。</td>
                <td>「思考と内省の大切な時間」と捉えます。</td>
              </tr>
              <tr>
                <td>上司の役割</td>
                <td>経験に基づく解決策の提示です。</td>
                <td>部下自身が答えを見つけるのを辛抱強く待ちます。</td>
              </tr>
            </tbody>
          </table>

          <h3>3. 導入による5つの主要メリット</h3>
          <h4>3.1. 人材育成の質の向上</h4>
          <p>部下は「指示待ち」から「自律的思考・行動」へと変化します。対話を通じて自己理解が深まり（ジョハリの窓が開く）、経験学習サイクルが加速することで、自ら気づきを得る（Aha!体験）瞬間が生まれます。</p>
          <h4>3.2. 離職率の改善とエンゲージメント向上</h4>
          <p>「理解されている」という実感は、組織への貢献意欲とコミットメントを強化します。孤独感や不安が解消され、帰属意識が高まるだけでなく、発言の変化などから離職の兆候を早期に発見することも可能になります。</p>
          <h4>3.3. 現場コミュニケーションの活性化</h4>
          <p>1on1での深い相互理解は、チーム全体の信頼関係に波及します。日常業務における情報共有の質と速度が向上し、風通しの良い組織文化が醸成されます。</p>
          <h4>3.4. 心理的安全性の確保</h4>
          <p>Google社の研究でもその重要性が示されている心理的安全性を確保します。失敗を恐れず報告・相談できる風土は、意見表明やチャレンジ精神を促し、イノベーションの土壌となります。</p>
          <h4>3.5. 上司のスキル向上と負担感の質の変化</h4>
          <p>傾聴力や質問力といった複合的なマネジメント能力が向上します。マイクロマネジメントから脱却し、部下一人ひとりに最適化された育成が可能になることで、上司自身のやりがいや達成感にも繋がります。</p>

          <h3>4. 特徴的な概念：「幸福のバケツ」</h3>
          <p>「幸福のバケツ」とは、1on1を通じて部下だけでなく、上司自身の心も満たされる対話を目指す考え方です。相手の話を真摯に聴き、その成長や気づきを共に喜ぶことで、聴き手である上司もまた幸福感や充実感を得られるという相互作用を指します。これは、単なる業務効率化を超え、人として互いに豊かになる関係性を築くことを目的としています。</p>

          <h3>5. 実践の基本ポイント</h3>
          <h4>5.1. 環境設定</h4>
          <ul>
            <li>静かで会話が中断されない空間を確保します。</li>
            <li>対立的な印象を与えないよう、座席配置を工夫します（例：90度の角度で座る）。</li>
            <li>スマートフォンなどの電源はオフにします。</li>
          </ul>
          <h4>5.2. 基本的な姿勢</h4>
          <ul>
            <li>批判や評価をせず、受容的な態度を保ちます。</li>
            <li>相手の言葉を遮りません。</li>
            <li>沈黙を恐れず、部下が自分の言葉で話すのを辛抱強く待ちます。</li>
          </ul>
          <h4>5.3. 注意点</h4>
          <ul>
            <li>評価面談と1on1は明確に目的を分けて実施します。</li>
            <li>性急に「正解」や「解決策」を求めません。</li>
            <li>1回の効果を期待しすぎず、継続を重視します。</li>
          </ul>

          <h3>6. よくある質問（上司向け）</h3>
          <dl>
            <dt>Q. どのくらいの頻度で実施すべきですか？</dt>
            <dd>A. 週1回から隔週に1回、15分〜30分が目安です。重要なのは頻度よりも継続することです。</dd>
            <dt>Q. アドバイスやフィードバックは一切できないのですか？</dt>
            <dd>A. 基本は「聴く・待つ」姿勢ですが、部下が明確にアドバイスを求めている場合や、育成上必要なフィードバックは適切に行うことが重要です。</dd>
            <dt>Q. 部下がなかなか話してくれない場合はどうすればよいですか？</dt>
            <dd>A. まずは安心できる雰囲気作りが最優先です。沈黙を恐れず、急かさずに待つ姿勢を示すことが大切です。未経験の上司でも実践できるよう、研修や伴走支援が用意されています。</dd>
            <dt>Q. 陥りやすい失敗は何ですか？</dt>
            <dd>A. 「沈黙に耐えられず、つい自分が話してしまう」「部下の話を最後まで聞かずにアドバイスしてしまう」「早く結論を出そうと急かしてしまう」などが挙げられます。</dd>
          </dl>
        </AccordionItem>

        <AccordionItem
          title="地蔵型1on1 ガイド：部下（話し手）向け"
          isOpen={openIndex === 1}
          onClick={() => handleAccordionClick(1)}
        >
          <h3>1. 「地蔵型1on1」とは：あなたのための対話の時間</h3>
          <p>1on1ミーティングは、あなたと上司が1対1で定期的に行う面談です。そしてこの時間は、他の誰でもない「あなたのための時間」です。</p>

          <h4>1.1. 1on1の目的</h4>
          <p>この時間の目的は、あなたが安心して仕事に取り組める環境を作ることです。具体的には以下のような目的を持ちます。</p>
          <ul>
            <li>仕事で感じていることや考えていることを話し、考えを整理します。</li>
            <li>あなた自身の成長やキャリアについて相談します。</li>
            <li>上司とのコミュニケーションを深め、信頼関係を築きます。</li>
            <li>自分のビジョンと会社の目標をすり合わせ、より良い働き方を見つけます。</li>
          </ul>

          <h4>1.2. 評価面談との違い</h4>
          <p>1on1は、あなたの業績や能力を評価するための面談ではありません。評価を気にして話す必要はなく、リラックスして本音を話せる対話の場です。</p>

          <h3>2. 1on1の進め方</h3>
          <h4>2.1. 主役はあなた（話し手）</h4>
          <p>1on1の主役はあなたです。あなたが話したいことを中心に進められます。上司は「聞き役」に徹し、「地蔵スタイル」であなたの話にじっくりと耳を傾けます。</p>
          
          <h4>2.2. 話す内容</h4>
          <p>話す内容は自由であり、何でも構いません。無理に特別な話題を用意する必要はありません。</p>
          <ul>
            <li>最近うまくいったこと、困っていること</li>
            <li>挑戦したいこと、将来のキャリアについて</li>
            <li>会社のことで気になっていること</li>
            <li>プライベートなことや、ちょっとした雑談</li>
          </ul>

          <h4>2.3. 事前準備について（任意）</h4>
          <p>事前準備は必須ではありません。もちろん、「このことについて話したい」というテーマや、「上司にどうしてほしいか（例：ただ聞いてほしい、アドバイスがほしい、一緒に考えてほしい）」を事前に考えておくと、対話がよりスムーズに進む場合があります。しかし、準備がなくても全く問題なく、その場で思いついたことを話せばよいです。</p>

          <h4>2.4. 基本的な流れ（30分の場合）</h4>
          <p>一般的な30分のセッションは以下のように進みます。</p>
          <ol>
            <li><strong>始まり（2-3分）:</strong> 軽い挨拶や雑談からスタートします。</li>
            <li><strong>最近のこと（5分）:</strong> 近況や調子について話します。</li>
            <li><strong>メインパート（15分）:</strong> 最も時間を取るパートです。気になっていることや考えていることを自由に話します。上司は基本的に黙って聞いています。</li>
            <li><strong>まとめ（4-5分）:</strong> 話した内容の確認や、必要なサポートについて話し合います。</li>
            <li><strong>次回に向けて（2-3分）:</strong> 次回までに考えておくことなどを確認します。</li>
            <li><strong>終わり（1分）:</strong> 感謝の言葉と挨拶で締めくくります。</li>
          </ol>

          <h3>3. 安心して話すための環境</h3>
          <h4>3.1. 信頼関係とプライバシー</h4>
          <p>上司は、あなたの話を否定したり、すぐにアドバイスしたりせず、まずは受け止めることを意識しています。あなたが安心して本音を話せるよう、プライバシーには配慮がなされます。</p>

          <h4>3.2. メモについて</h4>
          <p>上司は、対話の内容をより深く理解するためにメモを取ることがあります。もし記録として残してほしくない話題があれば、「ここはメモを取らないでいただけますか」のように、遠慮なく伝えることができます。</p>

          <h3>4. よくある質問（部下向け）</h3>
          <dl>
            <dt>Q. 何を話せばいいか分からないのですが…</dt>
            <dd>A. 無理に話題を用意する必要はなく、「特にありません」でも大丈夫です。雑談だけでも構いません。話しているうちに考えがまとまることも多いです。</dd>
            <dt>Q. 上司が全然アドバイスしてくれないのですが…</dt>
            <dd>A. この1on1では、上司はまず「聴く」ことを最優先しています。もし具体的なアドバイスや意見が欲しい場合は、「〇〇について、アドバイスをいただけますか？」と具体的に伝えてみることが推奨されます。</dd>
            <dt>Q. 話している途中の沈黙が気まずいです…</dt>
            <dd>A. 沈黙は、あなたが考えを深めたり、言葉を探したりするための大切な時間です。上司は意図的に沈黙を作り、あなたが自分のペースで話すのを待っています。これは「脳に汗をかく時間」と捉えられており、焦る必要はありません。</dd>
            <dt>Q. 会社や他の人への不満を言ってもいいですか？</dt>
            <dd>A. はい、大丈夫です。上司はまずあなたの気持ちを受け止めます。「こういう事実があって、こう感じている」と具体的に伝えると、より建設的な対話に繋がりやすいです。</dd>
          </dl>
        </AccordionItem>
      </div>
    </div>
  );
}

export default LearningResources;
